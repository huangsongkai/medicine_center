webpackJsonp([13],{0:function(e,t,a){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=a(1),l=t(r),o=a(17),i=t(o),s=a(159),u=t(s),c=a(583),d=t(c),f=a(13),p=t(f),m=a(11);i["default"].render(l["default"].createElement(m.Grid,null,l["default"].createElement(m.Row,{className:"show-grid"},l["default"].createElement(m.Col,{md:10},l["default"].createElement(m.Panel,{header:form_title},l["default"].createElement("div",{id:"tableRoot"},"loading..."))),l["default"].createElement(m.Col,{md:10}))),document.getElementById("root"));var h=e("#tableRoot").get(0);pageParas.pageType&&"sortList"==pageParas.pageType?i["default"].render(l["default"].createElement(d["default"],n({},pageParas,{keyword:p["default"].getQueryString("q"),state:p["default"].getQueryString("state")})),h):i["default"].render(l["default"].createElement(u["default"],n({},pageParas,{keyword:p["default"].getQueryString("q"),state:p["default"].getQueryString("state")})),h)}).call(t,a(16))},159:function(e,t,a){(function(e,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return function(t){return E(S(t,e),e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Row=void 0;var u=a(21),c=r(u),d=a(19),f=r(d),p=a(1),m=r(p),h=a(20),y=r(h),g=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),v=a(11),b=a(13),w=(r(b),{Row:{displayName:"Row"},PageList:{displayName:"PageList"}}),E=(0,y["default"])({filename:"D:/tools/tools/components/PageList.js",components:w,locals:[e],imports:[m["default"]]}),S=(0,f["default"])({filename:"D:/tools/tools/components/PageList.js",components:w,locals:[],imports:[m["default"],c["default"]]}),k=s("Row")(function(e){function t(e){return l(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),g(t,[{key:"editRow",value:function(e){window.location.href=this.props.editUrl+"/"+this.props.data[this.props.identifier]+"?pn="+window.location.hash.substring(1)}},{key:"render",value:function(){var e=this.props.filter,t=this.props.data,a=e.map(function(e){return m["default"].createElement("td",{style:{verticalAlign:"middle"}},t[e])});this.props.editUrl&&a.push(m["default"].createElement("td",{style:{verticalAlign:"middle",textAlign:"center"}},m["default"].createElement(v.Button,{onClick:this.editRow.bind(this)},this.props.editButtonTitle||"处理")));var n;return"处理中"==t.state?n="danger":"变更中"==t.state&&(n="warning"),m["default"].createElement("tr",{className:n},m["default"].createElement("td",{style:{verticalAlign:"middle",textAlign:"center"}},this.props.rowNo),a,m["default"].createElement("td",{style:{visibility:"hidden",width:"0px",padding:0,margin:0}},m["default"].createElement("img",{style:{"float":"left",minHeight:"40px",visibility:"hidden"}})))}}]),t}(p.Component)),P=s("PageList")(function(e){function t(e){l(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={activePage:a.props.activePage||1,totalPage:1,pageSize:10,rowList:[],taskState:a.props.state},a.curpage=a.props.activePage,a.columnKeys=[],a.columnValues=[];for(var n in a.props.columnFilter)a.columnKeys.push(a.props.columnFilter[n].name),a.columnValues.push(a.props.columnFilter[n].alias);return a.vhs=a.columnValues.map(function(e){return m["default"].createElement("th",{style:{textAlign:"center"}},e)}),a.props.editUrl&&a.vhs.push(m["default"].createElement("th",{style:{textAlign:"center"}},"操作")),a}return i(t,e),g(t,[{key:"componentDidMount",value:function(){this.handlePageSelect(this.state.activePage)}},{key:"fetchList",value:function(e){n.ajax({type:"get",dataType:"json",url:this.props.url+"/"+e,success:function(e){this.setState({totalPage:e.totalPage,pageSize:e.pageSize||10,rowList:e.data})}.bind(this),error:function(e){alert("操作失败")}})}},{key:"handlePageSelect",value:function(e){this.setState({activePage:e}),window.location.hash=e;var t=""+e;this.props.keyword&&(t+="?q="+this.props.keyword,n("input[name=q]").val(this.props.keyword)),this.state.taskState&&(t+=t.lastIndexOf("?")>-1?"&":"?",t+="state="+this.state.taskState),this.fetchList(t)}},{key:"default_success_callback",value:function(e){var t;t=1==e.status?e.message||"操作成功":e.message||"操作失败",alert(t)}},{key:"directToAddPage",value:function(){window.location.href=this.props.addUrl}},{key:"getSelector",value:function(){if(!("selector"in this.props))return"";var e=this.props.selector.value.map(function(e){return m["default"].createElement("option",{value:e.value},e.name)});return m["default"].createElement(v.FormControl,{componentClass:"select",placeholder:"type",name:this.props.selector.name,value:this.state.taskState,onChange:this.taskStateChange.bind(this)},e)}},{key:"taskStateChange",value:function(e){this.setState({taskState:e.target.value})}},{key:"genRows",value:function(){var e=this.props.identifier,t=this,a=(this.state.activePage-1)*this.state.pageSize+1;return this.state.rowList?this.state.rowList.map(function(n){return m["default"].createElement(k,{data:n,rowNo:a++,filter:t.columnKeys,identifier:e,editUrl:t.props.editUrl})}):"数据列表为空！"}},{key:"genAddButton",value:function(){if(this.props.addUrl)return m["default"].createElement(v.Button,{onClick:this.directToAddPage.bind(this),bsStyle:"primary",style:{"float":"right",margin:"-15px 0px 10px 0",padding:"5px 15px 5px 15px"}},"添加")}},{key:"render",value:function(){if(this.state.rowList){var e=this.genRows(),t="";return this.props.searchBar&&(t=m["default"].createElement("form",{action:window.location.href.split("?")[0].split("#")[0]},m["default"].createElement(v.Navbar,null,m["default"].createElement(v.Navbar.Header,null,m["default"].createElement(v.Navbar.Brand,null,m["default"].createElement("a",{href:"#",style:{fontSize:16}},"搜索")),m["default"].createElement(v.Navbar.Toggle,null)),m["default"].createElement(v.Navbar.Collapse,null,m["default"].createElement(v.Navbar.Form,{pullLeft:!0},m["default"].createElement(v.FormGroup,null,m["default"].createElement(v.FormControl,{type:"text",name:"q",placeholder:"Search",defaultValue:this.props.keyword}))," ",this.getSelector()," ",m["default"].createElement(v.Button,{type:"submit"},"提交")))))),m["default"].createElement("div",null,t,m["default"].createElement(v.Table,{striped:!0,bordered:!0,condensed:!0,hover:!0},m["default"].createElement("thead",null,m["default"].createElement("tr",null,m["default"].createElement("th",{style:{textAlign:"center"}},"序号"),this.vhs)),m["default"].createElement("tbody",null,e)),m["default"].createElement(v.Pagination,{prev:!0,next:!0,first:!0,last:!0,ellipsis:!0,boundaryLinks:!0,items:this.state.totalPage,maxButtons:5,activePage:this.state.activePage,onSelect:this.handlePageSelect.bind(this),style:{marginTop:"-15px"}}),this.genAddButton())}}}]),t}(p.Component));t["default"]=P,t.Row=k}).call(t,a(18)(e),a(16))},583:function(e,t,a){(function(e,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return function(t){return E(S(t,e),e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Row=void 0;var u=a(21),c=r(u),d=a(19),f=r(d),p=a(1),m=r(p),h=a(20),y=r(h),g=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),v=a(11),b=a(13),w=(r(b),{Row:{displayName:"Row"},SortList:{displayName:"SortList"}}),E=(0,y["default"])({filename:"D:/tools/tools/components/SortList.js",components:w,locals:[e],imports:[m["default"]]}),S=(0,f["default"])({filename:"D:/tools/tools/components/SortList.js",components:w,locals:[],imports:[m["default"],c["default"]]}),k=s("Row")(function(e){function t(e){l(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={"switch":!1},a.retNum="",a}return i(t,e),g(t,[{key:"render",value:function(){var e=this.props.filter,t=this.props.data,a=e.map(function(e){return m["default"].createElement("td",{style:{verticalAlign:"middle"}},t[e])});return m["default"].createElement("tr",null,m["default"].createElement("td",{style:{verticalAlign:"middle",textAlign:"center"}},this.props.rowNo),a,m["default"].createElement("td",{style:{visibility:"hidden",width:"0px",padding:0,margin:0}},m["default"].createElement("img",{style:{"float":"left",minHeight:"40px",visibility:"hidden"}})))}}]),t}(p.Component)),P=s("SortList")(function(e){function t(e){l(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={taskState:a.props.state},a.columnKeys=[],a.columnValues=[];for(var n in a.props.columnFilter)a.columnKeys.push(a.props.columnFilter[n].name),a.columnValues.push(a.props.columnFilter[n].alias);return a.vhs=a.columnValues.map(function(e){return m["default"].createElement("th",{style:{textAlign:"center"}},e)}),a.props.editUrl&&a.vhs.push(m["default"].createElement("th",{style:{textAlign:"center"}},"查看")),a}return i(t,e),g(t,[{key:"componentDidMount",value:function(){this.fetchList()}},{key:"fetchList",value:function(){n.ajax({type:"get",dataType:"json",url:this.props.url,success:function(e){this.setState({rowList:e.data,storedList:e.data})}.bind(this),error:function(e){alert("操作失败")}})}},{key:"taskStateChange",value:function(e){console.log(this.state.storedList);var t=e.target.value;if("all"==t)this.setState({rowList:this.state.storedList});else{var a=this.state.storedList.filter(function(e){return e.status==t});this.setState({rowList:a})}}},{key:"genRows",value:function(){var e=this.props.identifier,t=this,a=1;return this.state.rowList&&this.state.rowList.length>0?this.state.rowList.map(function(n){return m["default"].createElement(k,{ref:"_"+a,data:n,rowNo:a++,filter:t.columnKeys,identifier:e,editUrl:t.props.editUrl})}):m["default"].createElement("tr",null,m["default"].createElement("td",{colSpan:"8"},"数据列表为空！"))}},{key:"render",value:function(){if(!this.state.rowList)return m["default"].createElement("div",null);var e=this.genRows(),t="";return this.props.searchBar&&(t=m["default"].createElement("form",{action:window.location.href.split("?")[0].split("#")[0]},m["default"].createElement(v.Navbar,null,m["default"].createElement(v.Navbar.Header,null,m["default"].createElement(v.Navbar.Brand,null,m["default"].createElement("a",{href:"#",style:{fontSize:16}},"筛选：")),m["default"].createElement(v.Navbar.Toggle,null)),m["default"].createElement(v.Navbar.Collapse,null,m["default"].createElement(v.Navbar.Form,{pullLeft:!0},m["default"].createElement(v.FormGroup,null,m["default"].createElement(v.FormControl,{type:"text",name:"q",placeholder:"Search",defaultValue:this.props.keyword})),m["default"].createElement(v.Button,{type:"submit"},"提交")))))),m["default"].createElement("div",null,t,m["default"].createElement(v.Table,{striped:!0,bordered:!0,condensed:!0,hover:!0},m["default"].createElement("thead",null,m["default"].createElement("tr",null,m["default"].createElement("th",{style:{textAlign:"center"}},"序号"),this.vhs)),m["default"].createElement("tbody",null,e)))}}]),t}(p.Component));t["default"]=P,t.Row=k}).call(t,a(18)(e),a(16))}});